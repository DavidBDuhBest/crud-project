{"version":3,"sources":["../src/Documents.js"],"names":["width","setSite","res","formData","document","Liferay","method","body","get","setDocs","data","deleteDoc","setDocId","marginBottom","display","doc","id","e","docId","Documents"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect, useState} from 'react';\nimport ClayForm, {ClayInput} from '@clayui/form';\nimport ClayButton from '@clayui/button';\nimport ClayTable from '@clayui/table';\n\nimport { getSite } from './site';\n\n\nfunction Documents() {\n  return (\n    <div style={{width:'100%'}}>\n      <h1>Documents and Media</h1>\n      <hr />\n      <Document />\n    </div>\n  );\n}\n\n\nfunction Document() {\n  const [site, setSite] = useState('');\n  const [docId, setDocId] = useState('');\n  const [docs, setDocs] = useState([]);\n  \n  useEffect(() => {\n    getSite().then(res => {\n      setSite(res.items[0].id);\n    })\n  }, []);\n  \n  function doPost() {\n    const formData = new FormData();\n    formData.append('file', document.getElementById(\"theFile\").files[0]);\n    Liferay.Util.fetch(\n      `/o/headless-delivery/v1.0/sites/${site}/documents`,\n      {method: 'POST', body: formData}\n    );\n  }\n  \n  function doPut() {\n    const formData = new FormData();\n    formData.append('file', document.getElementById(\"theFile\").files[0]);\n    Liferay.Util.fetch(\n      `/o/headless-delivery/v1.0/documents/${docId}`,\n      {method: 'PUT', body: formData}\n    );\n  }\n\n  const get = useCallback(() => {\n    Liferay.Util.fetch(`/o/headless-delivery/v1.0/sites/${site}/documents/`)\n      .then(res => res.json())\n      .then(data => setDocs(data.items));\n    document.getElementById('docButton').firstChild.innerHTML = 'Update Documents';\n    document.getElementById('docTable').style.display = 'block';\n  }, [site]);\n\n  const deleteDoc = useCallback(() => {\n    Liferay.Util.fetch(`/o/headless-delivery/v1.0/documents/${docId}`, {method:'DELETE'})\n      .then(() => setDocId(''));\n    get();\n  }, [docId]);\n\n  return (\n    <div>\n      <div style={{marginBottom:\"2em\"}}>\n        <div id=\"docButton\">\n          <ClayButton displayType='secondary' onClick={() => get()}>\n            Show Documents\n          </ClayButton>\n        </div>\n        <div id='docTable' style={{display:'none'}}>\n          <ClayTable>\n            <ClayTable.Head>\n              <ClayTable.Row>\n                <ClayTable.Cell headingCell>\n                  {\"Document ID\"}\n                </ClayTable.Cell>\n                <ClayTable.Cell headingCell>{\"Document Title\"}</ClayTable.Cell>\n              </ClayTable.Row>\n            </ClayTable.Head>\n            <ClayTable.Body>\n              {docs.map(doc => (\n                <ClayTable.Row key={doc.id}>\n                  <ClayTable.Cell headingTitle>{doc.id}</ClayTable.Cell>\n                  <ClayTable.Cell>{doc.title}</ClayTable.Cell>\n                </ClayTable.Row>\n              ))}\n            </ClayTable.Body>\n          </ClayTable>\n        </div>\n      </div>\n      <ClayForm.Group>\n        <label htmlFor='docId'>Document ID</label>\n        <ClayInput\n          id=\"docId\"\n          onChange={e => setDocId(e.target.value)}\n          type=\"text\"\n          value={docId}\n        />\n      </ClayForm.Group>\n      <ClayButton displayType=\"primary\" onClick={() => deleteDoc()}>\n        Delete Document\n      </ClayButton>\n      <br style={{marginBottom:'4em'}} />\n      <input type=\"file\" id=\"theFile\" />\n      <ClayButton displayType=\"primary\" onClick={() => doPost()}>\n        Post Document\n      </ClayButton>\n      <ClayButton displayType=\"secondary\" onClick={() => doPut()}>\n        Update Document\n      </ClayButton>\n    </div>\n  );\n}\n  \n  \nexport default Documents;"]}