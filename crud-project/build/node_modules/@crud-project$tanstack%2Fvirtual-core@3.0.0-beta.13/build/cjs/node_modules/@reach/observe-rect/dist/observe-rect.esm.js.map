{"version":3,"sources":["../../../../../../../../node_modules/@reach/observe-rect/dist/observe-rect.esm.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,QAAI,QAAQ,CAAC,QAAD,EAAW,QAAX,EAAqB,MAArB,EAA6B,OAA7B,EAAsC,KAAtC,EAA6C,OAA7C,CAAZ;;AAEA,QAAI,cAAc,SAAS,WAAT,CAAqB,CAArB,EAAwB,CAAxB,EAA2B;AAC3C,UAAI,MAAM,KAAK,CAAf,EAAkB;AAChB,YAAI,EAAJ;AACD;;AAED,UAAI,MAAM,KAAK,CAAf,EAAkB;AAChB,YAAI,EAAJ;AACD;;AAED,aAAO,MAAM,IAAN,CAAW,UAAU,IAAV,EAAgB;AAChC,eAAO,EAAE,IAAF,MAAY,EAAE,IAAF,CAAnB;AACD,OAFM,CAAP;AAGD,KAZD;;AAcA,QAAI,gBAAa,aAAgB,IAAI,GAAJ,EAAjC;AACA,QAAI,KAAJ;;AAEA,QAAI,MAAM,SAAS,GAAT,GAAe;AACvB,UAAI,gBAAgB,EAApB;AACA,oBAAc,OAAd,CAAsB,UAAU,KAAV,EAAiB,IAAjB,EAAuB;AAC3C,YAAI,UAAU,KAAK,qBAAL,EAAd;;AAEA,YAAI,YAAY,OAAZ,EAAqB,MAAM,IAA3B,CAAJ,EAAsC;AACpC,gBAAM,IAAN,GAAa,OAAb;AACA,wBAAc,IAAd,CAAmB,KAAnB;AACD;AACF,OAPD;AAQA,oBAAc,OAAd,CAAsB,UAAU,KAAV,EAAiB;AACrC,cAAM,SAAN,CAAgB,OAAhB,CAAwB,UAAU,EAAV,EAAc;AACpC,iBAAO,GAAG,MAAM,IAAT,CAAP;AACD,SAFD;AAGD,OAJD;AAKA,cAAQ,OAAO,qBAAP,CAA6B,GAA7B,CAAR;AACD,KAhBD;;AAkBA,aAAS,WAAT,CAAqB,IAArB,EAA2B,EAA3B,EAA+B;AAC7B,aAAO;AACL,iBAAS,SAAS,OAAT,GAAmB;AAC1B,cAAI,WAAW,cAAc,IAAd,KAAuB,CAAtC;;AAEA,cAAI,cAAc,GAAd,CAAkB,IAAlB,CAAJ,EAA6B;AAC3B,0BAAc,GAAd,CAAkB,IAAlB,EAAwB,SAAxB,CAAkC,IAAlC,CAAuC,EAAvC;AACD,WAFD,MAEO;AACL,0BAAc,GAAd,CAAkB,IAAlB,EAAwB;AACtB,oBAAM,SADgB;AAEtB,8BAAgB,KAFM;AAGtB,yBAAW,CAAC,EAAD;AAHW,aAAxB;AAKD;;AAED,cAAI,QAAJ,EAAc;AACf,SAfI;AAgBL,mBAAW,SAAS,SAAT,GAAqB;AAC9B,cAAI,QAAQ,cAAc,GAAd,CAAkB,IAAlB,CAAZ;;AAEA,cAAI,KAAJ,EAAW;AACjB;AACQ,gBAAI,QAAQ,MAAM,SAAN,CAAgB,OAAhB,CAAwB,EAAxB,CAAZ;AACA,gBAAI,SAAS,CAAb,EAAgB,MAAM,SAAN,CAAgB,MAAhB,CAAuB,KAAvB,EAA8B,CAA9B,EAHP,CAGwC;;AAEjD,gBAAI,CAAC,MAAM,SAAN,CAAgB,MAArB,EAA6B,cAAc,QAAd,EAAwB,IAAxB,EALpB,CAKkD;;AAE3D,gBAAI,CAAC,cAAc,IAAnB,EAAyB,qBAAqB,KAArB;AAC1B;AACF;AA5BI,OAAP;AA8BF","sourcesContent":["var props = [\"bottom\", \"height\", \"left\", \"right\", \"top\", \"width\"];\n\nvar rectChanged = function rectChanged(a, b) {\n  if (a === void 0) {\n    a = {};\n  }\n\n  if (b === void 0) {\n    b = {};\n  }\n\n  return props.some(function (prop) {\n    return a[prop] !== b[prop];\n  });\n};\n\nvar observedNodes = /*#__PURE__*/new Map();\nvar rafId;\n\nvar run = function run() {\n  var changedStates = [];\n  observedNodes.forEach(function (state, node) {\n    var newRect = node.getBoundingClientRect();\n\n    if (rectChanged(newRect, state.rect)) {\n      state.rect = newRect;\n      changedStates.push(state);\n    }\n  });\n  changedStates.forEach(function (state) {\n    state.callbacks.forEach(function (cb) {\n      return cb(state.rect);\n    });\n  });\n  rafId = window.requestAnimationFrame(run);\n};\n\nfunction observeRect(node, cb) {\n  return {\n    observe: function observe() {\n      var wasEmpty = observedNodes.size === 0;\n\n      if (observedNodes.has(node)) {\n        observedNodes.get(node).callbacks.push(cb);\n      } else {\n        observedNodes.set(node, {\n          rect: undefined,\n          hasRectChanged: false,\n          callbacks: [cb]\n        });\n      }\n\n      if (wasEmpty) run();\n    },\n    unobserve: function unobserve() {\n      var state = observedNodes.get(node);\n\n      if (state) {\n        // Remove the callback\n        var index = state.callbacks.indexOf(cb);\n        if (index >= 0) state.callbacks.splice(index, 1); // Remove the node reference\n\n        if (!state.callbacks.length) observedNodes[\"delete\"](node); // Stop the loop\n\n        if (!observedNodes.size) cancelAnimationFrame(rafId);\n      }\n    }\n  };\n}\n\nexport default observeRect;\n//# sourceMappingURL=observe-rect.esm.js.map\n"]}