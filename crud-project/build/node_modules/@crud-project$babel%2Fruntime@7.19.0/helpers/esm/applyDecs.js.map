{"version":3,"sources":["applyDecs.js"],"names":["_typeof","old_createMetadataMethodsForProperty","metadataMap","kind","property","decoratorFinishedRef","getMetadata","key","old_assertNotFinished","old_assertMetadataKey","metadataForKey","pub","priv","get","Object","hasOwnProperty","call","constructor","setMetadata","value","Map","set","old_convertMetadataMapToFinal","obj","parentMetadataMap","Symbol","metadata","metadataKeys","getOwnPropertySymbols","length","i","metaForKey","parentMetaForKey","parentPub","setPrototypeOf","privArr","Array","from","values","parentPriv","concat","old_createAddInitializerMethod","initializers","initializer","old_assertCallable","push","old_memberDec","dec","name","desc","isStatic","isPrivate","kindStr","metadataKind","metadataName","ctx","v","addInitializer","access","assign","fnName","Error","TypeError","fn","hint","old_assertValidReturnValue","type","init","old_getInit","console","warn","old_applyMemberDec","ret","base","decInfo","newValue","decs","getOwnPropertyDescriptor","newInit","instance","ownInitializers","originalInitializer","args","defineProperty","old_applyMemberDecs","Class","protoMetadataMap","staticMetadataMap","decInfos","protoInitializers","staticInitializers","existingProtoNonFields","existingStaticNonFields","isArray","prototype","existingNonFields","existingKind","old_pushInitializers","old_applyClassDecs","targetClass","classDecs","newClass","nextNewClass","applyDecs","memberDecs"],"mappings":"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","file":"applyDecs.js","sourcesContent":["import _typeof from \"./typeof.js\";\n\nfunction old_createMetadataMethodsForProperty(metadataMap, kind, property, decoratorFinishedRef) {\n  return {\n    getMetadata: function getMetadata(key) {\n      old_assertNotFinished(decoratorFinishedRef, \"getMetadata\"), old_assertMetadataKey(key);\n      var metadataForKey = metadataMap[key];\n      if (void 0 !== metadataForKey) if (1 === kind) {\n        var pub = metadataForKey[\"public\"];\n        if (void 0 !== pub) return pub[property];\n      } else if (2 === kind) {\n        var priv = metadataForKey[\"private\"];\n        if (void 0 !== priv) return priv.get(property);\n      } else if (Object.hasOwnProperty.call(metadataForKey, \"constructor\")) return metadataForKey.constructor;\n    },\n    setMetadata: function setMetadata(key, value) {\n      old_assertNotFinished(decoratorFinishedRef, \"setMetadata\"), old_assertMetadataKey(key);\n      var metadataForKey = metadataMap[key];\n\n      if (void 0 === metadataForKey && (metadataForKey = metadataMap[key] = {}), 1 === kind) {\n        var pub = metadataForKey[\"public\"];\n        void 0 === pub && (pub = metadataForKey[\"public\"] = {}), pub[property] = value;\n      } else if (2 === kind) {\n        var priv = metadataForKey.priv;\n        void 0 === priv && (priv = metadataForKey[\"private\"] = new Map()), priv.set(property, value);\n      } else metadataForKey.constructor = value;\n    }\n  };\n}\n\nfunction old_convertMetadataMapToFinal(obj, metadataMap) {\n  var parentMetadataMap = obj[Symbol.metadata || Symbol[\"for\"](\"Symbol.metadata\")],\n      metadataKeys = Object.getOwnPropertySymbols(metadataMap);\n\n  if (0 !== metadataKeys.length) {\n    for (var i = 0; i < metadataKeys.length; i++) {\n      var key = metadataKeys[i],\n          metaForKey = metadataMap[key],\n          parentMetaForKey = parentMetadataMap ? parentMetadataMap[key] : null,\n          pub = metaForKey[\"public\"],\n          parentPub = parentMetaForKey ? parentMetaForKey[\"public\"] : null;\n      pub && parentPub && Object.setPrototypeOf(pub, parentPub);\n      var priv = metaForKey[\"private\"];\n\n      if (priv) {\n        var privArr = Array.from(priv.values()),\n            parentPriv = parentMetaForKey ? parentMetaForKey[\"private\"] : null;\n        parentPriv && (privArr = privArr.concat(parentPriv)), metaForKey[\"private\"] = privArr;\n      }\n\n      parentMetaForKey && Object.setPrototypeOf(metaForKey, parentMetaForKey);\n    }\n\n    parentMetadataMap && Object.setPrototypeOf(metadataMap, parentMetadataMap), obj[Symbol.metadata || Symbol[\"for\"](\"Symbol.metadata\")] = metadataMap;\n  }\n}\n\nfunction old_createAddInitializerMethod(initializers, decoratorFinishedRef) {\n  return function (initializer) {\n    old_assertNotFinished(decoratorFinishedRef, \"addInitializer\"), old_assertCallable(initializer, \"An initializer\"), initializers.push(initializer);\n  };\n}\n\nfunction old_memberDec(dec, name, desc, metadataMap, initializers, kind, isStatic, isPrivate, value) {\n  var kindStr;\n\n  switch (kind) {\n    case 1:\n      kindStr = \"accessor\";\n      break;\n\n    case 2:\n      kindStr = \"method\";\n      break;\n\n    case 3:\n      kindStr = \"getter\";\n      break;\n\n    case 4:\n      kindStr = \"setter\";\n      break;\n\n    default:\n      kindStr = \"field\";\n  }\n\n  var metadataKind,\n      metadataName,\n      ctx = {\n    kind: kindStr,\n    name: isPrivate ? \"#\" + name : name,\n    isStatic: isStatic,\n    isPrivate: isPrivate\n  },\n      decoratorFinishedRef = {\n    v: !1\n  };\n\n  if (0 !== kind && (ctx.addInitializer = old_createAddInitializerMethod(initializers, decoratorFinishedRef)), isPrivate) {\n    metadataKind = 2, metadataName = Symbol(name);\n    var access = {};\n    0 === kind ? (access.get = desc.get, access.set = desc.set) : 2 === kind ? access.get = function () {\n      return desc.value;\n    } : (1 !== kind && 3 !== kind || (access.get = function () {\n      return desc.get.call(this);\n    }), 1 !== kind && 4 !== kind || (access.set = function (v) {\n      desc.set.call(this, v);\n    })), ctx.access = access;\n  } else metadataKind = 1, metadataName = name;\n\n  try {\n    return dec(value, Object.assign(ctx, old_createMetadataMethodsForProperty(metadataMap, metadataKind, metadataName, decoratorFinishedRef)));\n  } finally {\n    decoratorFinishedRef.v = !0;\n  }\n}\n\nfunction old_assertNotFinished(decoratorFinishedRef, fnName) {\n  if (decoratorFinishedRef.v) throw new Error(\"attempted to call \" + fnName + \" after decoration was finished\");\n}\n\nfunction old_assertMetadataKey(key) {\n  if (\"symbol\" != _typeof(key)) throw new TypeError(\"Metadata keys must be symbols, received: \" + key);\n}\n\nfunction old_assertCallable(fn, hint) {\n  if (\"function\" != typeof fn) throw new TypeError(hint + \" must be a function\");\n}\n\nfunction old_assertValidReturnValue(kind, value) {\n  var type = _typeof(value);\n\n  if (1 === kind) {\n    if (\"object\" !== type || null === value) throw new TypeError(\"accessor decorators must return an object with get, set, or init properties or void 0\");\n    void 0 !== value.get && old_assertCallable(value.get, \"accessor.get\"), void 0 !== value.set && old_assertCallable(value.set, \"accessor.set\"), void 0 !== value.init && old_assertCallable(value.init, \"accessor.init\"), void 0 !== value.initializer && old_assertCallable(value.initializer, \"accessor.initializer\");\n  } else if (\"function\" !== type) {\n    var hint;\n    throw hint = 0 === kind ? \"field\" : 10 === kind ? \"class\" : \"method\", new TypeError(hint + \" decorators must return a function or void 0\");\n  }\n}\n\nfunction old_getInit(desc) {\n  var initializer;\n  return null == (initializer = desc.init) && (initializer = desc.initializer) && \"undefined\" != typeof console && console.warn(\".initializer has been renamed to .init as of March 2022\"), initializer;\n}\n\nfunction old_applyMemberDec(ret, base, decInfo, name, kind, isStatic, isPrivate, metadataMap, initializers) {\n  var desc,\n      initializer,\n      value,\n      newValue,\n      get,\n      set,\n      decs = decInfo[0];\n  if (isPrivate ? desc = 0 === kind || 1 === kind ? {\n    get: decInfo[3],\n    set: decInfo[4]\n  } : 3 === kind ? {\n    get: decInfo[3]\n  } : 4 === kind ? {\n    set: decInfo[3]\n  } : {\n    value: decInfo[3]\n  } : 0 !== kind && (desc = Object.getOwnPropertyDescriptor(base, name)), 1 === kind ? value = {\n    get: desc.get,\n    set: desc.set\n  } : 2 === kind ? value = desc.value : 3 === kind ? value = desc.get : 4 === kind && (value = desc.set), \"function\" == typeof decs) void 0 !== (newValue = old_memberDec(decs, name, desc, metadataMap, initializers, kind, isStatic, isPrivate, value)) && (old_assertValidReturnValue(kind, newValue), 0 === kind ? initializer = newValue : 1 === kind ? (initializer = old_getInit(newValue), get = newValue.get || value.get, set = newValue.set || value.set, value = {\n    get: get,\n    set: set\n  }) : value = newValue);else for (var i = decs.length - 1; i >= 0; i--) {\n    var newInit;\n    if (void 0 !== (newValue = old_memberDec(decs[i], name, desc, metadataMap, initializers, kind, isStatic, isPrivate, value))) old_assertValidReturnValue(kind, newValue), 0 === kind ? newInit = newValue : 1 === kind ? (newInit = old_getInit(newValue), get = newValue.get || value.get, set = newValue.set || value.set, value = {\n      get: get,\n      set: set\n    }) : value = newValue, void 0 !== newInit && (void 0 === initializer ? initializer = newInit : \"function\" == typeof initializer ? initializer = [initializer, newInit] : initializer.push(newInit));\n  }\n\n  if (0 === kind || 1 === kind) {\n    if (void 0 === initializer) initializer = function initializer(instance, init) {\n      return init;\n    };else if (\"function\" != typeof initializer) {\n      var ownInitializers = initializer;\n\n      initializer = function initializer(instance, init) {\n        for (var value = init, i = 0; i < ownInitializers.length; i++) {\n          value = ownInitializers[i].call(instance, value);\n        }\n\n        return value;\n      };\n    } else {\n      var originalInitializer = initializer;\n\n      initializer = function initializer(instance, init) {\n        return originalInitializer.call(instance, init);\n      };\n    }\n    ret.push(initializer);\n  }\n\n  0 !== kind && (1 === kind ? (desc.get = value.get, desc.set = value.set) : 2 === kind ? desc.value = value : 3 === kind ? desc.get = value : 4 === kind && (desc.set = value), isPrivate ? 1 === kind ? (ret.push(function (instance, args) {\n    return value.get.call(instance, args);\n  }), ret.push(function (instance, args) {\n    return value.set.call(instance, args);\n  })) : 2 === kind ? ret.push(value) : ret.push(function (instance, args) {\n    return value.call(instance, args);\n  }) : Object.defineProperty(base, name, desc));\n}\n\nfunction old_applyMemberDecs(ret, Class, protoMetadataMap, staticMetadataMap, decInfos) {\n  for (var protoInitializers, staticInitializers, existingProtoNonFields = new Map(), existingStaticNonFields = new Map(), i = 0; i < decInfos.length; i++) {\n    var decInfo = decInfos[i];\n\n    if (Array.isArray(decInfo)) {\n      var base,\n          metadataMap,\n          initializers,\n          kind = decInfo[1],\n          name = decInfo[2],\n          isPrivate = decInfo.length > 3,\n          isStatic = kind >= 5;\n\n      if (isStatic ? (base = Class, metadataMap = staticMetadataMap, 0 !== (kind -= 5) && (initializers = staticInitializers = staticInitializers || [])) : (base = Class.prototype, metadataMap = protoMetadataMap, 0 !== kind && (initializers = protoInitializers = protoInitializers || [])), 0 !== kind && !isPrivate) {\n        var existingNonFields = isStatic ? existingStaticNonFields : existingProtoNonFields,\n            existingKind = existingNonFields.get(name) || 0;\n        if (!0 === existingKind || 3 === existingKind && 4 !== kind || 4 === existingKind && 3 !== kind) throw new Error(\"Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: \" + name);\n        !existingKind && kind > 2 ? existingNonFields.set(name, kind) : existingNonFields.set(name, !0);\n      }\n\n      old_applyMemberDec(ret, base, decInfo, name, kind, isStatic, isPrivate, metadataMap, initializers);\n    }\n  }\n\n  old_pushInitializers(ret, protoInitializers), old_pushInitializers(ret, staticInitializers);\n}\n\nfunction old_pushInitializers(ret, initializers) {\n  initializers && ret.push(function (instance) {\n    for (var i = 0; i < initializers.length; i++) {\n      initializers[i].call(instance);\n    }\n\n    return instance;\n  });\n}\n\nfunction old_applyClassDecs(ret, targetClass, metadataMap, classDecs) {\n  if (classDecs.length > 0) {\n    for (var initializers = [], newClass = targetClass, name = targetClass.name, i = classDecs.length - 1; i >= 0; i--) {\n      var decoratorFinishedRef = {\n        v: !1\n      };\n\n      try {\n        var ctx = Object.assign({\n          kind: \"class\",\n          name: name,\n          addInitializer: old_createAddInitializerMethod(initializers, decoratorFinishedRef)\n        }, old_createMetadataMethodsForProperty(metadataMap, 0, name, decoratorFinishedRef)),\n            nextNewClass = classDecs[i](newClass, ctx);\n      } finally {\n        decoratorFinishedRef.v = !0;\n      }\n\n      void 0 !== nextNewClass && (old_assertValidReturnValue(10, nextNewClass), newClass = nextNewClass);\n    }\n\n    ret.push(newClass, function () {\n      for (var i = 0; i < initializers.length; i++) {\n        initializers[i].call(newClass);\n      }\n    });\n  }\n}\n\nexport default function applyDecs(targetClass, memberDecs, classDecs) {\n  var ret = [],\n      staticMetadataMap = {},\n      protoMetadataMap = {};\n  return old_applyMemberDecs(ret, targetClass, protoMetadataMap, staticMetadataMap, memberDecs), old_convertMetadataMapToFinal(targetClass.prototype, protoMetadataMap), old_applyClassDecs(ret, targetClass, staticMetadataMap, classDecs), old_convertMetadataMapToFinal(targetClass, staticMetadataMap), ret;\n}"]}